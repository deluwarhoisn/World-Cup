!function(){"use strict";const e={APM_SENT:window.VWO._.sDMA?`vwo_apm_sent_${window._vwo_acc_id}`:"vwo_apm_sent"};function t(){let t={},o={},{accountId:i,domain:n}={accountId:window._vwo_acc_id,domain:document.location.hostname.replace(/^www\./,"")||window._vwo_cookieDomain};document.addEventListener("tellBackend",(d=>{if("object"==typeof(s=d.detail)&&!Array.isArray(s)&&null!==s&&0!==Object.keys(d.detail).length)return Object.keys(d.detail).forEach((e=>{t[e]=d.detail[e]})),o.data=t,o.accountId=i,o.domain=n,function(e,t){let o,i=!1;return function(...n){i&&(clearTimeout(o),o=null),o=setTimeout((function(){e.apply(null,n)}),t),i=!0}}((t=>{!async function(t="",o={}){try{const i=JSON.stringify(o);if("function"==typeof navigator.sendBeacon&&navigator.sendBeacon(t,i))return void localStorage.setItem(e.APM_SENT,`${Date.now()}`);await fetch(t,{method:"POST",mode:"no-cors",body:i,headers:{"Content-type":"application/json; charset=UTF-8"}}),localStorage.setItem(e.APM_SENT,`${Date.now()}`)}catch(e){}}("https://dev.visualwebsiteoptimizer.com/apm",t)}),10)(o);var s}))}var o=new class{constructor(){this.VWO_URL="dev.visualwebsiteoptimizer.com",this.vwoRegex=/https:\/\/dev\.visualwebsiteoptimizer\.com/,this.syncCodeRegex=/https:\/\/dev\.visualwebsiteoptimizer\.com\/lib\/\d{1,9}\.js(?!\?&?mode)/i,this.legacySyncCodeRegex=/js_visitor_settings.php/g,this.jphpRegex=/dev\.visualwebsiteoptimizer\.com\/j\.php(?!\?mode)/,this.settingRegex=/dev\.visualwebsiteoptimizer\.com\/settings\.js/,this.jslibRegex=/https:\/\/dev\.visualwebsiteoptimizer\.com\/web\/.*\/tag-.*\.js|https:\/\/dev\.visualwebsiteoptimizer\.com\/edrv\/va.*?\.js/,this.uniqueVistorUrl=/dev\.visualwebsiteoptimizer\.com(?:\/[a-zA-Z0-9]+)?\/v\.gif/}getSmartCodeInfo(){var e,t,o,i,n,d,s;let r,a,c,l,m,u,v=0,w=(null===(e=window._VWO)||void 0===e?void 0:e.sCDD)||!1,p=Array.from(document.querySelectorAll("script"));for(let e=0;e<p.length;e++){let t=p[e].innerHTML.replace(/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,"");!p[e].src&&"vwoCode"==p[e].id||t&&t.includes("_vwo_code")&&t.includes("finish:")&&t.includes("finished:")?(r="async",c=e,p[e].src||"vwoCode"!=p[e].id||(u=e),v++):p[e].src&&p[e].src.includes(this.VWO_URL+"/lib/")&&this.syncCodeRegex.test(p[e].src)?(r="sync","no-referrer-when-downgrade"==p[e].getAttribute("referrerpolicy")&&(l=!0),c=e,v++):t&&t.includes(this.VWO_URL+"/deploy/js_visitor_settings.php?")&&(r="legacySync",c=e,v++)}0==v?(r=this.checkSmartCodeTypeAndMultiSmartCode2(),w?a=void 0:(a="external","async"===r&&(m=this.getSmartCodeVersion()))):1==v?(r=this.checkSmartCodeTypeAndMultiSmartCode2(),w?a=void 0:(a=this.getSmartCodeLocation(p[c]),"async"===r&&(m=this.getSmartCodeVersion()||this.extractVariableValueFromScript(p[c].innerHTML,"version")))):v>1&&(w?(r=void 0,a=void 0):u&&(a=this.getSmartCodeLocation(p[u]),m=this.getSmartCodeVersion()||this.extractVariableValueFromScript(p[u].innerHTML,"version")));const h=this.getPreConnectLinkPosition(),g=document.getElementById("vwoCode"),_=(null==g?void 0:g.hasAttribute("async"))||!1,y=(null==g?void 0:g.hasAttribute("defer"))||!1,f="number"==typeof window._vwo_acc_id,S=(null===(t=window._vwo_code)||void 0===t?void 0:t.getVersion)?typeof window._vwo_code.getVersion():"null";let C,b;"number"==typeof m&&m>=2?(C=(null===(o=window._vwo_code)||void 0===o?void 0:o.settings_tolerance)?typeof window._vwo_code.settings_tolerance():"null",b=(null===(i=window._vwo_code)||void 0===i?void 0:i.hide_element)?typeof window._vwo_code.hide_element():"null"):(C="number",b="string");const T=(null===(n=window._vwo_code)||void 0===n?void 0:n.hide_element_style)?typeof window._vwo_code.hide_element_style():"null",V=(null===(d=window._vwo_code)||void 0===d?void 0:d.sT)||!1;return{preConnectLinkPos:h,asyncAttribute:_,deferAttribute:y,accountIdPresent:f,versionReturnType:S,settingsToleranceReturnType:C,hideElementReturnType:b,hideElementStyleReturnType:T,settingTolerance:V,libraryTolerance:!!V||1===(null===(s=window._vwo_code)||void 0===s?void 0:s.lT),type:r,location:a,multipleSmartCode:w,version:m,isNewOscVersion:l,pageUrl:document.location.origin+document.location.pathname}}getPreConnectLinkPosition(){const e=document.getElementsByTagName("link");for(const t of e)if("preconnect"===t.rel&&t.href.includes(this.VWO_URL)){let e=t.parentElement;for(;e&&"HTML"!==e.tagName;){if("HEAD"===e.tagName)return"head";if("BODY"===e.tagName)return"body";e=e.parentElement}return"not found"}return"not found"}extractVariableValueFromScript(e,t){const o=e.match(new RegExp(`${t}\\s*=\\s*(\\d+(\\.\\d+)?)`));if(o){let e=parseFloat(o[1]);return isNaN(e)?void 0:e}}checkSmartCodeTypeAndMultiSmartCode2(){let e,t=0;const o=performance.getEntries().filter((e=>"resource"===e.entryType&&("script"===e.initiatorType||"xmlhttprequest"===e.initiatorType)));for(const i of o)this.jphpRegex.test(i.name)?(t++,e="async"):this.syncCodeRegex.test(i.name)?(t++,e="sync"):this.legacySyncCodeRegex.test(i.name)&&(t++,e="legacySync");return t>1&&(e=void 0),e}getSmartCodeLocation(e){return e.closest("head")?"head":e.closest("body")?"body":" external"}getSmartCodeVersion(){var e,t,o;return null!==(o=null===(t=null===(e=window._vwo_code)||void 0===e?void 0:e.getVersion)||void 0===t?void 0:t.call(e))&&void 0!==o?o:void 0}addListener(){document.addEventListener("apmLoaded",(e=>{this.sendDataToBackend()}))}sendDataToBackend(){var e,t;document.dispatchEvent((e="tellBackend",t={smartCodeInfo:this.smartCodeInfo},new CustomEvent(e,{detail:t})))}init(){navigator.userAgent.includes("Firefox")||(this.addListener(),this.smartCodeInfo=this.getSmartCodeInfo())}};function i(){window.VWO.isApmLoaded||(t(),o.init(),document.dispatchEvent(new Event("apmLoaded")),window.VWO.isApmLoaded=!0)}Date.now()-JSON.parse(localStorage.getItem(e.APM_SENT))>432e5&&localStorage.removeItem(e.APM_SENT),window.VWO.apm||localStorage.getItem(e.APM_SENT)||(window.VWO.apm=!0,"complete"===document.readyState?i():window.addEventListener("load",i))}();
